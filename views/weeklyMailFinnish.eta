<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <base target="_parent">    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <style>
        body {
            font-family: monospace;
            border: 0px;
            margin: 0px;
            padding: 0px;
            display: block;
            font-size: 14px;
            line-height: 150%;
        }
        pre {
            white-space:pre-wrap;
            white-space: -moz-pre-wrap;
            white-space: -pre-wrap;
            white-space: -o-pre-wrap;
            word-wrap:break-word;
        }
    </style>

    <script>
       $(document).ready(function() {
            $(".btn").click(function () {
                $(this).find('i').toggleClass('fas fa-minus-circle');
            });
            $(".calendarSpecial").click(function() {
                let t = $(this);
                let name = t.attr("name");

                let el = $("#" + name);
                let parent = el.parent();

                let target = "#" + parent.attr('id');
                console.log(target);
                let el2 = $("button[data-target='" + target +"']");

                let is = parent.find('i');
                for (let i = 0; i < is.length; i++) {
                    let element = is[i];
                    console.log(element);
                    let p = $(element).parent();

                    if (p.attr("data-target") === "#" + name) {
                        $(element).toggleClass('fas fa-minus-circle');
                    }
                }
                el.collapse('toggle');
                if (!parent.hasClass('in')) {
                    parent.collapse('toggle');
                    el2.find('i').toggleClass('fas fa-minus-circle');
								}
           });
			 });
 
    </script>    

</head>


<body>
<div class="container">
<PRE>
<%= it.greeting %>

<h2>Sis√§llysluettelo</h2>

1. Kalenteri
2. Kilta
<% it.guildItems.forEach((bulletin) => { %>
  <a href="#">2.<%= bulletin.index %> <%= bulletin.name %></a>
<% }) %>
3. AYY & Aalto
<% it.ayyItems.forEach((bulletin) => { %>
  <a href="#">2.<%= bulletin.index %> <%= bulletin.name %></a>
<% }) %>
4. Muut
<% it.otherItems.forEach((bulletin) => { %>
  <a href="#">2.<%= bulletin.index %> <%= bulletin.name %></a>
<% }) %>
5. Pohjanurkkaus
<% it.bottomCorner.forEach((bulletin) => { %>
  <a href="#">2.<%= bulletin.index %> <%= bulletin.name %></a>
<% }) %>

----
<h2>1. Kalenteri</h2>
...

----

<h2>2. Kilta</h2>
<% it.guildItems.forEach((bulletin) => { %>
<u>2.<%= bulletin.index %>. <%=bulletin.name %> <%= bulletin.date.day %>.<%= bulletin.date.month %>.</u>
<p><%= bulletin.text %></p>
---
<% }) %>

<h2>3. AYY & Aalto</h2>
<% it.ayyItems.forEach((bulletin) => { %>
<u>3.<%= bulletin.index %>.<%=bulletin.name %> <%= bulletin.date.day %>.<%= bulletin.date.month %>.</u>
<p><%= bulletin.text %></p>
---
<% }) %>

<h2>4. Muut</h2>
<% it.otherItems.forEach((bulletin) => { %>
<u>4.<%= bulletin.index %>.<%=bulletin.name %> <%= bulletin.date.day %>.<%= bulletin.date.month %>.</u>
<p><%= bulletin.text %></p>
---
<% }) %>

<h2>5. Pohjanurkkaus</h2>
<% it.bottomCorner.forEach((bulletin) => { %>
<u>5.<%= bulletin.index %>.<%=bulletin.name %></u>
<p><%= bulletin.text %></p>
---
<% }) %>
</PRE>
</div>
</body>
</html>